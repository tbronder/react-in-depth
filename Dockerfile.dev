# Dockerfile.dev - Development environment for React, Node.js, and Golang
#
# Inspired by David Bryant Copeland's approach to Docker-based development:
# - Use official, trusted base images
# - Keep it minimal but functional
# - Clear documentation of choices
#
# Build: docker build -f Dockerfile.dev -t react-in-depth-dev .
# Run:   docker run -it --rm -v "$(pwd):/root/react-in-depth" -w /root/react-in-depth react-in-depth-dev

# Start with official Node.js Alpine image (trusted publisher: Docker Official)
# This gives us Node.js 22 LTS on Alpine Linux
FROM node:22-alpine

# Document the image purpose
LABEL maintainer="developer"
LABEL description="Development environment for React, Node.js, and Golang applications"

# Install Go from Alpine packages and essential build tools
# Using apk packages ensures we're getting trusted, vetted software
RUN apk add --no-cache \
    go \
    git \
    build-base \
    bash \
    && rm -rf /var/cache/apk/*

# Set Go environment variables
ENV GOPATH=/root/go
ENV PATH="${GOPATH}/bin:${PATH}"

# Create the project directory
RUN mkdir -p /root/react-in-depth

# Set the working directory
WORKDIR /root/react-in-depth

# Default command opens a shell for interactive development
CMD ["/bin/bash"]
